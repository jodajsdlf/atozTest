<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="atoz.code.mapper.CodeMapper">
    <select id="codeGroupList" resultType="atoz.code.model.CodeGroupModel">
        select code_group codeGroup, code_group_name codeGroupName, note
        from code_group
    </select>

    <select id="selectCodeGroup" resultType="atoz.code.model.CodeGroupModel">
        select code_group codeGroup, code_group_name codeGroupName, note
        from code_group
        where code_group = #{groupNum}
    </select>

    <select id="selectCodeList" resultType="atoz.code.model.CodeModel">
        select c.code, c.code_name codeName, c.note
        from code_group cg, code c
        where cg.code_group = c.code_group
        and c.code_group = #{groupNum}
        order by c.sort
    </select>

    <select id="selectCode" resultType="atoz.code.model.CodeModel">
        select code, code_name codeName, note, code_group codeGroup
        from code
        where code = #{code}
    </select>

    <update id="updateCodeGroup">
        update code_group
        set code_group_name = #{codeGroupName},
        note = #{note}
        where code_group = #{codeGroup}
    </update>

    <update id="updateCode">
        update code
        set code_name = #{codeName},
        note = #{note}
        where code_group = #{codeGroup}
        and code = #{code}
    </update>

    <insert id="insertCodeGroup">
        insert into code_group(com_number, code_group_name, note) values(#{comNumber, jdbcType=BIGINT}, #{codeGroupName}, #{note})
    </insert>

    <insert id="insertCode">
        insert into code(code_group, code_name, note) values(#{codeGroup}, #{codeName}, #{note})
    </insert>

    <delete id="deleteCodeGroup">
        delete from code_group where code_group = #{codeGroup}
    </delete>

    <delete id="deleteCode">
        delete from code where code=#{code}
    </delete>

    <update id="sortCode">
        update code
        set sort = #{sort}
        where code = #{code}
    </update>
</mapper>
